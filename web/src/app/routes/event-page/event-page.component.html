<div class="event" *ngIf="event">
  <app-popup *ngIf="showEdit" title="Edit event" (close)="closeEditPopup($event)">
    <form class="form" [formGroup]="editForm" (ngSubmit)="saveEvent($event);">
      <fieldset class="form-group">
        <app-input class="input" formControlName="name" placeholder="Name" defaultValue="{{event.name}}"></app-input>
        <input type="file" value="Select image" (change)="upload($event)" />
        <app-progress-bar *ngIf="uploading" [progress]="uploadProgress"></app-progress-bar>
        <app-switch formControlName="publish" label="Publish" [defaultValue]="published"></app-switch>
        <app-submit class="input" value="Save"></app-submit>
      </fieldset>
    </form>
  </app-popup>
  <div class="top-panel">
    <app-header class="header">{{ event.name }}</app-header>
    <div class="buttons">
      <app-button class="button" *ngIf="canRegister" (click)="register()" value="Register"></app-button>
      <app-button class="button" (click)="goBack()" value="Back"></app-button>
      <app-button class="button" *ngIf="eventOwner" (click)="showEditPopup($event)" value="Edit"></app-button>
    </div>
  </div>
  <img *ngIf="event.coverMediaId" [src]="'http://localhost:3003/storage/' + event.coverMediaId" />
  <app-attendees-table *ngIf="pretenders.length > 0" [eventOwner]="eventOwner" (add)="accept($event)" (remove)="removeUser($event)"
    title="Pretenders" [attendees]="pretenders">
  </app-attendees-table>
  <app-attendees-table *ngIf="participants.length > 0" [eventOwner]="eventOwner" (remove)="removeUser($event)" title="Participants"
    [attendees]="participants">
  </app-attendees-table>
  <app-attendees-table *ngIf="invited.length > 0" [eventOwner]="eventOwner" (remove)="removeUser($event)" title="Invited"
    [attendees]="invited">
  </app-attendees-table>
</div>